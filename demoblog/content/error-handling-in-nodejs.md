---
title: Error Handling on Node.js 
description: Most of us deal with error in our program and as a good programmer we should always be able to handle our exceptions or errors gracefully. 
image: https://cdn.hashnode.com/res/hashnode/image/upload/v1640694299703/3yZ8m1wz4.png
publishedAt: 2021-12-28
authors:
  - name: Sanjay Sanjel
    avatarUrl: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTUstgs8cVrAZ4A2s8adMnLH6X-FtkDWM08Qg&usqp=CAU
    link: https://twitter.com/
tags:
  - Node.js
  - Error Handling
  - Error Handling in Nodejs
link: https://codesandbox.io/embed/nuxt-content-l164h?hidenavigation=1&theme=dark



---
Error handling is a process or a methodology where we try to gracefully handle any errors or exceptions that arise during our program. 

Generally, error handling in our program indicates that we actually follow the best practise of writing and developing applications.

So, first of all, why error handling? Why even bother writing some lines of code to handle error? The answer is pretty simple. It makes life of you and following programmer easier. It helps to identify error more quickly and also helps you to mitigate it much quicker.

In Node.js we can use a **Global Middleware** to handle our errors. We construct an Error middleware and use it in our application globally.

The error middleware we construct takes four arguments => `error`, `req`, `res` and `next` in that same order. (This is actually written in reference to Express.js)

```javascript
app.use((err,req,res,next)=>{
err.statusCode = err.statusCode || 500;
err.status = err.status || 'error';

res.status(err.statusCode).json({
    status:err.status,
    message:err.message
})
})
```
Here, what we've done is created a middle ware and used it. This is done in our main `app.js` file.

**Working Mechanism**

In our code where we get the error, we make new Errors and then throw them so that we can handle them effectively. That's why we must use good error status code while writing our program.

Note: If we give any kind of argument on `next()` function, Express automatically knows that it should be an error handler.

**Other mechanism of handling Error**

In order to effectively handle our error , we can also create a ***Class*** that extends `Error` class.

```javascript
class AppError extends Error {
    constructor(message, statusCode) {
        super(message);


        this.statusCode = statusCode;
        this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';
        this.isOperational = true;


        Error.captureStackTrace(this, this.constructor);
    }
}

module.exports = AppError;
```

The constructor of the `AppError` class takes two parameters - `message` and `statusCode`. The `message` is the error message that is generated by the program and `statusCode` refers to the status code that is returned by the exceptions.

Then we also created a Error Controller in our controller directive on our application and placed the following code:

```javascript
module.exports = (err, req, res, next) => {
    err.statusCode = err.statusCode || 500;
    err.status = err.status || 'error';


    res.status(err.statusCode).json({
        status: err.status,
        message: err.message
    });
};
```

So, where ever we need to handle the error, we import an pass this function as a parameter to the app.use() middleware.

